Changes in 1.6.1
================

- New "debug step" mode added, which can be very handy both to understand crossQuery and to debug stylesheet problems. This is enabled by adding "&debugStep=1" to the crossQuery URL. This also works in the experimental SRU servlet.

- Added optional ability to turn on a "runaway" timer, that will report and optionally kill off requests that exceed specified time limits. This can help in tracking down intermittent server slowdowns. This is configured in conf/crossQuery.conf and conf/dynaXML.conf.

- Added optional cutoff size for latency reporting. After a request has exceeded this amount of data, the servlet will report the latency immediately. When the request finally finishes, the final latency is also reported. This is configured in conf/crossQuery.conf and conf/dynaXML.conf.

- Minor improvements to paging behavior in crossQuery resultFormatterCommon.xsl.

- Fixed "Modify Query" link in crossQuery default/resultFormatter.xsl.

- Fixed bug that caused the Content-Type of "raw" mode output from dynaXML to be "text/html" instead of the proper "text/xml".

- Fixed a potential thread synchronization issue in lazy file access.

- Changed timestamp output to be more compatible with Resin and Tomcat.

- Fixed thread contention issue with query rewriting.

- Fixed memory leak with performing searches in dynaXML.

- Fixed handling of '&quot;' and '&amp;' characters in meta-data fields during indexing (was throwing an exception instead of passing these through.)

- Switched indexer to using Lucene's "compound files" mode. This results in indexes that have many fewer files, and thus avoids problems with running out of filesystem handles. The indexes are compatible, and the indexer will silently upgrade older indexes to the new compound files.

- TextIndexer now outputs the XTF version number (1.6.1) instead of the perpetual "1.0".

- Reduced memory usage of accent and plural mapping facilities.

- Clarified error message when an exception is encountered during Saxon processing.

- Minor documentation updates to reflect new features above, but a full documentation revision will have to wait until the 1.7 release.


Changes in 1.6.0
================

- Fixed caching problem that caused sort/group data to be reloaded on each query, rather than cached between queries as was intended.

- Fixed static variable problem that was causing the SRU and crossQuery servlets to conflict with each other.

- Fixed multi-threading bug: when many simultaneous crossQuery threads tried to access the same index, they would sometimes corrupt each others' span results.

- Fixed bug: for apps that use the QueryProcessor Java API, the hit count and score normalization were not being reset from one use to the next. This bug did not affect crossQuery or dynaXML, which make a new QueryProcessor for every request.

- Fixed to avoid marking terms specified in a <not> query.

- Fixed a bug causing the indexer to crash when tokenizing certain fields ending in "."

- Fixed 'textIndexer' and 'indexStats' scripts to work properly under Microsoft Windows.

- Fixed a bug in handling of '&', '<', and '>' in source documents: they were being double-escaped. For instance, '&' would become '&amp;amp' instead of '&amp;'.

- Fixed a bug in handling of the XSLT 'previous::*' axis. The axis would operate incorrectly on lazy trees, essentially acting just like 'previous-sibling::*'.

- The SRU servlet was completely broken, but is now working again.

- Sample stylesheets now provide an option to reverse the order of sort-by-year.

- Added a new feature (as yet undocumented) that allows stylesheets to call out to external command-line tools. Robustly handles XML input and output, and allows a timeout specification. See regress/CrossQuery/K-External for examples of how to use this facility.

- Distribution now available as either a full distribution as before, or split into "core" and "example" pieces. The "core" piece is especially useful for existing users to upgrade the core while leaving all their stylesheets and configuration files intact.

- Minor documentation corrections


Changes in 1.5.1
================

- Now works again under Java 1.4 (was using Integer.valueOf(int), which is only present in Java 1.5) 

- Corrected problem where dynaXML wouldn't run unless an index was present (tried to create lazy file in a directory that didn't exist yet.) 

- Fixed textIndexer and indexStats scripts to allow spaces in the XTF_HOME path, and to properly switch between ":" classpath separation on Unix and ";" on Windows. 

- crossQuery servlet now passes the time (in seconds) it took to parse and process the query to the resultFormatter stylesheet. Documetation reflects this. 

- Installation procedures corrected and simplified. Please see new documentation for more details.
