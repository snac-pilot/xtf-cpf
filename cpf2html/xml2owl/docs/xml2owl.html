<!DOCTYPE html>  <html> <head>   <title>xml2owl.xsl</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               xml2owl.xsl             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h1>convert EAC XML to RDF</h1>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">&lt;xsl:stylesheet</span> 
  <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span> 
  <span class="na">xmlns:rdf=</span><span class="s">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span> 
  <span class="na">xmlns:rdfs=</span><span class="s">&quot;http://www.w3.org/2000/01/rdf-schema#&quot;</span> 
  <span class="na">xmlns:dc=</span><span class="s">&quot;http://purl.org/dc/elements/1.1/&quot;</span> 
  <span class="na">xmlns:dcterms=</span><span class="s">&quot;http://purl.org/dc/terms/&quot;</span> 
  <span class="na">xmlns:owl=</span><span class="s">&quot;http://www.w3.org/2002/07/owl#&quot;</span> 
  <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#&quot;</span> 
  <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> 
  <span class="na">xmlns:skos=</span><span class="s">&quot;http://www.w3.org/2008/05/skos#&quot;</span> 
  <span class="na">xmlns:foaf=</span><span class="s">&quot;http://xmlns.com/foaf/0.1/&quot;</span> 
  <span class="na">xmlns:bio=</span><span class="s">&quot;http://purl.org/vocab/bio/0.1/&quot;</span> 
  <span class="na">xmlns=</span><span class="s">&quot;urn:isbn:1-931666-33-4&quot;</span> 
  <span class="na">xmlns:eax=</span><span class="s">&quot;urn:isbn:1-931666-33-4&quot;</span> 
  <span class="na">xmlns:eac-cpf=</span><span class="s">&quot;http://archivi.ibc.regione.emilia-romagna.it/ontology/eac-cpf/&quot;</span> 
  <span class="na">xmlns:viaf=</span><span class="s">&quot;http://viaf.org/ontology/1.1/#&quot;</span> 
  <span class="na">xmlns:gn=</span><span class="s">&quot;http://www.geonames.org/ontology#&quot;</span> 
  <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span> 
  <span class="na">version=</span><span class="s">&quot;1.0&quot;</span>
<span class="nt">&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Created by Silvia Mazzini, Regesta.exe, 2011</p>

<p>Copyright (c) 2011, Regesta.exe
All rights reserved.</p>

<p>Redistribution and use are permitted provided that the following conditions are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
    * Neither the name of Eduserv nor the
      names of its contributors may be used to endorse or promote products
      derived from this software without specific prior written permission.</p>

<h3>Related Work</h3>

<p><a href="http://ceur-ws.org/Vol-801/paper6.pdf">EAC-CPF Ontology and Linked Archival Data</a>
Proceedings of the 1st International Workshop on Semantic Digital Archives (SDA 2011)</p>

<p><a href="http://templates.xdams.net/RelationBrowser/genericEAC/RelationBrowserCIA.html">eac-cpf ontology browser</a></p>

<p><a href="http://code.google.com/p/elda/">Epimorphics Linked Data API Implementation</a> <br />
a java implementation of the 
<a href="http://code.google.com/p/linked-data-api/">Linked Data API</a></p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">&lt;xsl:output</span> <span class="na">method=</span><span class="s">&quot;xml&quot;</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span> <span class="na">encoding=</span><span class="s">&quot;UTF-8&quot;</span> <span class="na">indent=</span><span class="s">&quot;yes&quot;</span><span class="nt">/&gt;</span>

  </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>root template </p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;*&quot;</span><span class="nt">&gt;</span>
    <span class="k">&lt;xsl:apply-templates</span><span class="nt">/&gt;</span>
  <span class="k">&lt;/xsl:template&gt;</span>

  </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>I could not get this to work in the default namespace; 
       choose eax: for the xml; eac-cpf is the RDF's namespace ~bt </p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;eax:eac-cpf&quot;</span><span class="nt">&gt;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>root rdf element </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nt">&lt;rdf:RDF</span> 
       <span class="na">xmlns:rdf=</span><span class="s">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span>
       <span class="na">xmlns:rdfs=</span><span class="s">&quot;http://www.w3.org/2000/01/rdf-schema#&quot;</span>
       <span class="na">xmlns:dc=</span><span class="s">&quot;http://purl.org/dc/elements/1.1/&quot;</span>
       <span class="na">xmlns:dcterms=</span><span class="s">&quot;http://purl.org/dc/terms/&quot;</span>
       <span class="na">xmlns:owl=</span><span class="s">&quot;http://www.w3.org/2002/07/owl#&quot;</span>
       <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#&quot;</span>
       <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
       <span class="na">xmlns:skos=</span><span class="s">&quot;http://www.w3.org/2008/05/skos#&quot;</span>
       <span class="na">xmlns:foaf=</span><span class="s">&quot;http://xmlns.com/foaf/0.1/&quot;</span>
       <span class="na">xmlns:bio=</span><span class="s">&quot;http://purl.org/vocab/bio/0.1/&quot;</span>
       <span class="na">xmlns=</span><span class="s">&quot;urn:isbn:1-931666-33-4&quot;</span>
       <span class="na">xmlns:eac-cpf=</span><span class="s">&quot;http://archivi.ibc.regione.emilia-romagna.it/ontology/eac-cpf/&quot;</span>
       <span class="na">xmlns:viaf=</span><span class="s">&quot;http://viaf.org/ontology/1.1/#&quot;</span>
       <span class="na">xmlns:gn=</span><span class="s">&quot;http://www.geonames.org/ontology#&quot;</span>
       <span class="na">xmlns:xlink=</span><span class="s">&quot;http://www.w3.org/1999/xlink&quot;</span>
    <span class="nt">&gt;</span> 
      <span class="k">&lt;xsl:variable</span> <span class="na">name=</span><span class="s">&quot;entityType&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:identity/eax:entityType&quot;</span><span class="nt">/&gt;</span>
      <span class="k">&lt;/xsl:variable&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:{$entityType}&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:about&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>http://socialarchive.iath.virginia.edu/xtf/view?docId=#entity<span class="k">&lt;/xsl:text&gt;</span>
        <span class="k">&lt;/xsl:attribute&gt;</span>
          <span class="nt">&lt;rdfs:label</span> <span class="na">rdf:datatype=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema#string&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:identity/eax:nameEntry/eax:part&quot;</span><span class="nt">/&gt;</span>
      </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>this definatly should be refactored </p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates&quot;</span><span class="nt">&gt;</span>, <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;substring(eax:cpfDescription/eax:description/eax:existDates/eax:date/@standardDate,1,4)&quot;</span><span class="nt">/&gt;</span>-<span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;substring(eax:cpfDescription/eax:description/eax:existDates/eax:date/@standardDate,10,4)&quot;</span><span class="nt">/&gt;</span>
      <span class="k">&lt;/xsl:if&gt;</span>
    <span class="nt">&lt;/rdfs:label&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p><code>foaf:page, foaf:depiction, owl:sameAs per viaf, gn:Feature</code> </p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>dates </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates&quot;</span><span class="nt">&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:date&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:date/@standardDate&quot;</span><span class="nt">/&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
    <span class="k">&lt;/xsl:if&gt;</span>

    </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>viaf </p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p><code>xslt
    &lt;xsl:element name="owl:sameAs"&gt;
      &lt;xsl:attribute name="rdf:resource"&gt;http://viaf.org/viaf/&lt;/xsl:attribute&gt;
    &lt;/xsl:element&gt;
</code></p>             </td>             <td class="code">               <div class="highlight"><pre>    </pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>control</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control&quot;</span><span class="nt">&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:control&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
        <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span><span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:attribute&gt;</span>Identificazione Soggetto Produttore <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:identity/eax:nameEntry/eax:part/text()&quot;</span><span class="nt">/&gt;</span><span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:recordID&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:recordId&quot;</span><span class="nt">/&gt;</span>
        <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:otherRecordId&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:otherRecordId&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:otherRecordID&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
          <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:maintenanceStatus&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:maintenanceStatus&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:maintenanceStatus&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:publicationStatus&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:publicationStatus&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:publicationStatus&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:maintenanceAgency&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:maintenanceAgency&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:maintenanceAgency/eax:agencyName/text()&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:languageDeclaration&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:languageDeclaration&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:languageDeclaration/eax:language/text()&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:conventionDeclaration&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:conventionDeclaration&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:conventionDeclaration/eax:citation/text()&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:control/eax:sources&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;not(eax:control/eax:sources/eax:source/@xlink:href)&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:sources/eax:source&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:source&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:sourceEntry&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
              <span class="k">&lt;/xsl:for-each&gt;</span>
            <span class="k">&lt;/xsl:when&gt;</span>
            <span class="k">&lt;xsl:otherwise</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:sources/eax:source[@xlink:href]&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dcterms:source&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xlink:href&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:attribute&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
              <span class="k">&lt;/xsl:for-each&gt;</span>
            <span class="k">&lt;/xsl:otherwise&gt;</span>
          <span class="k">&lt;/xsl:choose&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
    <span class="k">&lt;/xsl:if&gt;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <h2>cpfDescription</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription&quot;</span><span class="nt">&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:description&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
        <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:identity/eax:nameEntry&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:nameEntry&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;foaf:name&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;xml:lang&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xml:lang&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:attribute&gt;</span>
              <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:part/text()&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:authorizedForm&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:authorizedForm&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:authorizedForm/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:alternativeForm&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:alternativeForm&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:alternativeForm/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@localType&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dcterms:conformsTo&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@localType&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:date/@standardDate&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:existDates&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:date/@standardDate&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:dateRange&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:existDates&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:dateRange/eax:fromDate&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:dateRange/eax:toDate&quot;</span><span class="nt">&gt;</span>/<span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:existDates/eax:dateRange/eax:toDate&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:localDescription[@localType=&#39;subject&#39;]&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:localDescription[@localType=&#39;subject&#39;]&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:subject&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:term/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:for-each&gt;</span>
          <span class="k">&lt;/xsl:when&gt;</span>
        <span class="k">&lt;/xsl:choose&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:places&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:places/eax:place&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;contains(eax:descriptiveNote/eax:p,&#39;nascita&#39;)&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;bio:Birth&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;bio:date&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;substring-before(../../eax:existDates,&#39;-&#39;)&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                  <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;gn:Feature&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                      <span class="k">&lt;/xsl:attribute&gt;</span>
                    <span class="k">&lt;/xsl:element&gt;</span>
                    <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:place&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                      <span class="k">&lt;/xsl:attribute&gt;</span>
                    <span class="k">&lt;/xsl:element&gt;</span>
                  <span class="k">&lt;/xsl:if&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
              <span class="k">&lt;/xsl:when&gt;</span>
              <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;contains(eax:descriptiveNote/eax:p,&#39;morte&#39;)&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;bio:Death&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;bio:date&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;substring-after(../../eax:existDates,&#39;-&#39;)&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                  <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;gn:Feature&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                      <span class="k">&lt;/xsl:attribute&gt;</span>
                    <span class="k">&lt;/xsl:element&gt;</span>
                    <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:place&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                      <span class="k">&lt;/xsl:attribute&gt;</span>
                    <span class="k">&lt;/xsl:element&gt;</span>
                  <span class="k">&lt;/xsl:if&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
              <span class="k">&lt;/xsl:when&gt;</span>
              <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/eax:p/text()=&#39;sede&#39;&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;gn:Feature&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                    <span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:place&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>
                      <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:placeEntry&quot;</span><span class="nt">/&gt;</span>
                    <span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;/xsl:when&gt;</span>
            <span class="k">&lt;/xsl:choose&gt;</span>
          <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:biogHist&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:biogHist&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:biogHist&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:occupation&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:occupation&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:occupation&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;term/text()&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
          <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
      <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:cpfDescription/eax:relations&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:relations/eax:cpfRelation&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:cpfRelation&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
            <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;@cpfRelationType&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span><span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:attribute&gt;&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span> <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@cpfRelationType&quot;</span><span class="nt">/&gt;</span> relation with <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span><span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:cpfRelationType&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@cpfRelationType&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/p&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:description&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:descriptiveNote/p/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;/xsl:when&gt;</span>
              <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span><span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:attribute&gt;&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry[1]/eax:part&quot;</span><span class="nt">/&gt;</span> <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">/&gt;</span> <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span><span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:cpfRelationType&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/p&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:description&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:descriptiveNote/eax:p/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;/xsl:when&gt;</span>
            <span class="k">&lt;/xsl:choose&gt;</span>
            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dcterms:relation&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:resource&quot;</span><span class="nt">&gt;</span>http://archivi.ibc.regione.emilia-romagna.it/eac-cpf/<span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/@localType&quot;</span><span class="nt">/&gt;</span><span class="k">&lt;/xsl:attribute&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:date&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;date&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:relations/eax:resourceRelation&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;@resourceRelationType&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:resourceRelation&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>
                     <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:text&gt;</span>
                  <span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@resourceRelationType=&#39;creatorOf&#39;&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span>
                    <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>  creator of <span class="k">&lt;/xsl:text&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:if&gt;</span>
                  <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@resourceRelationType=&#39;other&#39;&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span>
                    <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>  in relation with <span class="k">&lt;/xsl:text&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:if&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:resourceRelationType&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@resourceRelationType&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/eax:p&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:description&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:descriptiveNote/eax:p/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
                </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>xsl:element name="dcterms:relation">
                </xsl:element </p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:date&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:date&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:date&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:when&gt;</span>
            <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:resourceRelation&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:text&gt;</span>
                  <span class="k">&lt;/xsl:attribute&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry[1]/eax:part&quot;</span><span class="nt">/&gt;</span>                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:resourceRelationType&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@xlink:arcrole&quot;</span><span class="nt">/&gt;</span>
                <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/eax:p&quot;</span><span class="nt">&gt;</span>
                  <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:description&quot;</span><span class="nt">&gt;</span>
                    <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:descriptiveNote/eax:p/text()&quot;</span><span class="nt">/&gt;</span>
                  <span class="k">&lt;/xsl:element&gt;</span>
                <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:when&gt;</span>
          <span class="k">&lt;/xsl:choose&gt;</span>
        <span class="k">&lt;/xsl:for-each&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>controllare </p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:cpfDescription/eax:relations/eax:functionRelation&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:functionRelation&quot;</span><span class="nt">&gt;</span>
            <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>need to come back here and finsh converting this to xsl:text </p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdfs:label&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:datatype&quot;</span><span class="nt">&gt;</span>http://www.w3.org/2001/XMLSchema#string<span class="k">&lt;/xsl:attribute&gt;</span>
              <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@functionRelationType=&#39;controls&#39;&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span>  creator of 
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@functionRelationType=&#39;owns&#39;&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span>  creator of 
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:if&gt;</span>
              <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;@functionRelationType=&#39;performs&#39;&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;../../eax:identity/eax:nameEntry/eax:part[@localType=&#39;normal&#39;]&quot;</span><span class="nt">/&gt;</span>  creator of 
              <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:relationEntry/text()&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;eac-cpf:functionRelationType&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@functionRelationType&quot;</span><span class="nt">/&gt;</span>
            <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:descriptiveNote/eax:p&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:description&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:descriptiveNote/eax:p/text()&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
            <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;date&quot;</span><span class="nt">&gt;</span>
              <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:date&quot;</span><span class="nt">&gt;</span>
                <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;date&quot;</span><span class="nt">/&gt;</span>
              <span class="k">&lt;/xsl:element&gt;</span>
            <span class="k">&lt;/xsl:if&gt;</span>
          <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;/xsl:for-each&gt;</span>
      <span class="k">&lt;/xsl:if&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>not sure if we want this yet </p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;skos:changeNote&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:attribute</span> <span class="na">name=</span><span class="s">&quot;rdf:parseType&quot;</span><span class="nt">&gt;</span>Resource<span class="k">&lt;/xsl:attribute&gt;</span>
        <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:date&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:maintenanceHistory/eax:maintenanceEvent[child::eventType=&#39;create&#39;]/eax:eventDateTime/text()&quot;</span><span class="nt">/&gt;</span>
        <span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:creator&quot;</span><span class="nt">&gt;</span>IBC<span class="k">&lt;/xsl:element&gt;</span>
        <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;rdf:value&quot;</span><span class="nt">&gt;</span>create<span class="k">&lt;/xsl:element&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:identifier&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:recordId&quot;</span><span class="nt">/&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
      <span class="k">&lt;xsl:element</span> <span class="na">name=</span><span class="s">&quot;dc:creator&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:control/eax:maintenanceHistory/eax:maintenanceEvent[child::eventType=&#39;create&#39;]/eax:agent&quot;</span><span class="nt">/&gt;</span>
      <span class="k">&lt;/xsl:element&gt;</span>
    <span class="k">&lt;/xsl:if&gt;</span>

      <span class="k">&lt;/xsl:element&gt;</span>
    <span class="nt">&lt;/rdf:RDF&gt;</span>
  <span class="k">&lt;/xsl:template&gt;</span>


  </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>bioghist </p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;eax:cpfDescription/eax:description/eax:biogHist&quot;</span><span class="nt">&gt;</span>
    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:p&quot;</span><span class="nt">&gt;</span>
      <span class="k">&lt;xsl:apply-templates</span><span class="nt">/&gt;</span>
    <span class="k">&lt;/xsl:if&gt;</span>
    </pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>refactor to apply templates </p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:chronList&quot;</span><span class="nt">&gt;</span>
      <span class="k">&lt;xsl:for-each</span> <span class="na">select=</span><span class="s">&quot;eax:chronList/eax:chronItem&quot;</span><span class="nt">&gt;</span>
        <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;eax:date&quot;</span><span class="nt">&gt;</span>
          <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;eax:date&quot;</span><span class="nt">/&gt;</span>
          <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>: <span class="k">&lt;/xsl:text&gt;</span>
        <span class="k">&lt;/xsl:if&gt;</span>
      <span class="k">&lt;/xsl:for-each&gt;</span>
        <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;normalize-space(eax:event)&quot;</span><span class="nt">/&gt;</span>; 
    <span class="k">&lt;/xsl:if&gt;</span>
  <span class="k">&lt;/xsl:template&gt;</span>
  <span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;eax:p&quot;</span><span class="nt">&gt;</span>
    <span class="k">&lt;xsl:apply-templates</span><span class="nt">/&gt;</span>
  <span class="k">&lt;/xsl:template&gt;</span>
<span class="k">&lt;/xsl:stylesheet&gt;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 